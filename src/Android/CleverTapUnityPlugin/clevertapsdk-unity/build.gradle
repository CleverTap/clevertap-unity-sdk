apply plugin: 'com.android.library'

ext {

    libraryName = 'CleverTapUnityPlugin'
    artifact = 'clevertapsdk-unity'
    libraryDescription = 'The CleverTap Unity SDK'

    mindSdkVersionVal = 16
    compileSdkVersionVal = 31
    targetSdkVersionVal = compileSdkVersionVal
    buildToolsVersionVal = "30.0.3"

    libraryVersion = "2.3.0"
}

android {
    compileSdkVersion compileSdkVersionVal
    buildToolsVersion buildToolsVersionVal

    defaultConfig {
        minSdkVersion mindSdkVersionVal
        targetSdkVersion targetSdkVersionVal

        versionCode libraryVersion.replaceAll('\\.', '').toInteger()
        versionName libraryVersion
    }

    buildTypes {
        release {
            minifyEnabled false
        }
    }

    libraryVariants.all { variant ->
        variant.outputs.all {
            if (variant.getName().toLowerCase().contains('release')) {
                outputFileName = "${artifact}-${libraryVersion}.aar"
            } else if (variant.getName().toLowerCase().contains('debug')) {
                outputFileName = "${artifact}-${libraryVersion}-${variant.name}.aar"
            }
        }
    }
}

repositories {
    mavenCentral()
}

dependencies {
    // This will add classes from com.unity3d.player to our library which will  allow the ClevertapPlugin.java class to get access to current unity activity and work on it accordingly
    compileOnly fileTree('libs')

    implementation 'com.clevertap.android:clevertap-android-sdk:4.6.7'
    implementation 'androidx.annotation:annotation:1.2.0'
    implementation 'androidx.appcompat:appcompat:1.2.0'
}